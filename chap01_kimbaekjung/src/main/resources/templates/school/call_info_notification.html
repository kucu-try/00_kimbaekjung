<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="/css0/myGlobal.css">
    <link rel="stylesheet" href="/css0/call_notification.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
</head>

<body>
<header class="navbox">
  <nav>
    <h1>
      <button class="main">
        <a href="#">학교종이 땡땡땡</a>
      </button>
    </h1>
    <ul>
      <li>
        <button class="ranking">
          <a href="#">랭킹</a>
        </button>
      </li>
      <li>
        <button class="calendar">
          <a href="#">캘린더</a>
        </button>
      </li>
      <li>
        <button class="student-management">
          <a href="/management/student_manage">학생관리</a>
        </button>
      </li>
      <li>
        <button class="mypage">
          <a id="myPage" href="/school/mypage_info">마이페이지</a>
        </button>
      </li>
    </ul>
  </nav>
</header>

<div id="bar"></div>

<div id="fiveFrame">

  <a href="/school/mypage_info" id="studentInfo">
    <div id="iconTag1">
      <i class="bi-info-circle"></i>
    </div>
    <div id="studentWord">학생정보</div>
  </a>


  <a href="/school/call_info_notification" id="call">
    <div id="iconTag2">
      <i class="bi-whatsapp"></i>
    </div>
    <div id="callWord">고객센터</div>
  </a>

  <a href="/school/restart_info" id="restart">
    <div id="iconTag3">
      <i class="bi-arrow-clockwise"></i>
    </div>
    <div id="restartWord">초기화</div>
  </a>

  <a href="/school/logout_info" id="logout">
    <div id="iconTag4">
      <i class="bi-box-arrow-right"></i>
    </div>
    <div id="logoutWord">로그아웃</div>
  </a>

  <a href="/school/destroy_info" id="destroy">
    <div id="iconTag5">
      <i class="bi-slash-circle"></i>
    </div>
    <div id="destroyWord">회원탈퇴</div>
  </a>
</div>

<a href="/school/call_info_notification" id="asideBtn">
  <div id="btn1">공지게시판</div>
</a>

<a href="/school/call_info_propose" id="asideBtn2">
  <div id="btn2">건의게시판</div>
</a>

<article id="article">

  <div id="notiTitle">
    <div id="no">
      <div>번호</div>
    </div>

    <div id="notiName">
      <div>제목</div>
    </div>

    <div id="writer">
      <div>작성자</div>
    </div>

    <div id="registDate">
      <div>등록일</div>
    </div>
  </div>

<!--  -->
  <section class="namelist1" th:each="title1 : ${titles}">
    <div id="special1" th:text="${title1.code}"></div>
    <button id="special2" th:text="${title1.name}"></button>
    <div id="special3">관리자</div>
    <div id="special4" th:text="${#dates.format(title1.noticeDate, 'yyyy.MM.dd')}"></div>
  </section>

<!--&&&&&&&&&&&&&&&&&-->
  <div class="paging">
    <i class="bi-chevron-double-left" id="firstPage"></i>
    <i class="bi-chevron-left" id="prevPage"></i>
    <div class="pages">
      <span class="active">1</span>
      <span>2</span>
      <span>3</span>
      <span>4</span>
      <span>5</span>
    </div>
    <i class="bi-chevron-right" id="nextPage"></i>
    <i class="bi-chevron-double-right" id="lastPage"></i>
  </div>

  <!--************페이지 넘김 버튼**************-->
<!--  <div id="allPageBtn">-->
<!--    <div id="leftBtns">-->
<!--      <button style="border: none">-->
<!--        <img src="/img/doubleArrow.svg">-->
<!--      </button>-->

<!--      <button style="border: none">-->
<!--        <img src="/img/arrow.svg">-->
<!--      </button>-->
<!--    </div>-->

<!--    <a href="#">1</a>-->

<!--    <div id="rightBtns">-->
<!--      <button style="border: none">-->
<!--        <img src="/img/arrow.svg" style="transform: rotate(180deg)">-->
<!--      </button>-->

<!--      <button style="border: none">-->
<!--        <img src="/img/doubleArrow.svg" style="transform: rotate(180deg)">-->
<!--      </button>-->
<!--    </div>-->

<!--  </div>-->
<!--  ****************검색기능***************-->
  <div id="research">
    <input type="text" id="search">
    <button>검색</button>
  </div>
</article>



<!--*****************footer****************-->
<footer id=footers>
  <div id = email>kbjcom@google.com</div>

  <img src="/img/bell.png" alt="school Bell" id="bell">
  <div id =footerTitle>학교 종이 땡땡땡</div>

  <div id="number">call : 010-6411-9074</div>
  <div id="footerFinal">
    <div>Copyright (C) 2023</div>
    <div id="jejuH">.김백정컴퍼니.</div>
    <div>All rights reserved.</div>
  </div>
</footer>

<script>
  /* 페이지 네이션 */
  const countPerPage = 2; // 페이지 당 데이터 수
  const showPageCnt = 2; // 화면에 보일 페이지 번호 개수
  const totalRows = document.querySelectorAll('.namelist1').length; // 총 데이터 수
  const totalPage = Math.ceil(totalRows / countPerPage); // 총 페이지 수, Math.ceil : 소수점 자리에서 올림 기능

  let currentPage = 1; // 초기 페이지 초기화

  // 페이지 네이션(페이지 번호) 출력 함수
  function renderPagination() {

    let pageGroup = Math.ceil(currentPage / showPageCnt) // 페이지 그룹. (1~5그룹, 6~10그룹, ...)

    const pagesDiv = document.querySelector('.pages');
    pagesDiv.innerHTML = ''; // 기존 1~5 페이지 초기화

    let first = pageGroup * showPageCnt - (showPageCnt - 1); // 페이지 그룹의 첫 페이지 번호
    let last = pageGroup * showPageCnt // 페이지 그룹의 마지막 페이지 번호

    if (last > totalPage) {
      last = totalPage;
    } // 마지막 페이지 번호가 전체 페이지 번호보다 높을 경우 마지막 페이지로 설정

    // 그룹의 첫 페이지 부터 마지막 페이지 까지 반복
    for (let i = first; i <= last; i++) {
      const pageSpan = document.createElement('span'); // createElement(): 새로운 HTML 요소를 생성
      pageSpan.textContent = i; // pageSpan의 텍스트 내용을 i의 값으로 설정
      pageSpan.addEventListener('click', function () { // pageSpan 클릭시 함수 실행
        currentPage = i; // 클릭한 번호로 현재 페이지 설정
        renderContent(currentPage); // 현재 페이지의 데이터를 표시하는 함수 호출
        renderPagination(); // 페이지 네이션 다시 렌더링
      });
      if (i === currentPage) {
        pageSpan.classList.add('active'); // pageSpan에 active 클래스 추가
      }
      pagesDiv.appendChild(pageSpan); // pagesDiv에 자식요소로 pageSpan 추가
    }
  }

  // 페이지 데이터 출력 함수
  function renderContent(page) {
    const startIdx = (page - 1) * countPerPage; // 클릭한 페이지에서 불러올 첫번째 데이터 인덱스 번호
    const endIdx = startIdx + countPerPage - 1; // 클릭한 페이지에서 불러올 마지막 데이터 인덱스 번호
    const noticeRows = document.querySelectorAll('.namelist1') // noticeRows = 클래스가 content-notice-table-body 인 요소 모두 선택

    noticeRows.forEach((row, idx) => { // 각 요소의 인덱스를 확인 후, 해당 인덱스가 현재 페이지에 표시되어야 하는 범위 내에 있는지 확인
      if (idx >= startIdx && idx <= endIdx) { // 해당 인덱스가 범위 내에 있는 경우
        row.style.display = 'flex'; // table-row로 설정되어 표시
      } else {
        row.style.display = 'none'; // none으로 설정되어 숨겨진다.
      }
    });
  }

  // 페이지 로드 시 초기화 및 페이지네이션 랜더링
  document.addEventListener('DOMContentLoaded', function () {
    renderContent(currentPage);
    renderPagination();
  });

  // 이전 페이지로 이동
  document.getElementById('prevPage').addEventListener('click', function () {
    if (currentPage > 1) {
      currentPage--;
      renderContent(currentPage);
      renderPagination();
    }
  });

  // 다음 페이지로 이동
  document.getElementById('nextPage').addEventListener('click', function () {
    if (currentPage < totalPage) {
      currentPage++;
      renderContent(currentPage);
      renderPagination();
    }
  });

  // 처음 페이지로 이동
  document.getElementById('firstPage').addEventListener('click', function () {
    currentPage = 1;
    renderContent(currentPage);
    renderPagination();
  });

  // 마지막 페이지로 이동
  document.getElementById('lastPage').addEventListener('click', function () {
    currentPage = totalPage;
    renderContent(currentPage);
    renderPagination();
  })
</script>


</body>
</html>